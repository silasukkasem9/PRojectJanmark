<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dinosaur</title>
<style>
  body {
    margin: 0;
    background: #87CEEB; /* sky blue */
    overflow: hidden;
    font-family: Arial, sans-serif;
  }
  canvas {
    display: block;
    margin: 40px auto 0 auto; /* space for button */
    background: #5c94fc; /* lighter sky */
    border: 2px solid #333;
  }
  #homeBtn {
    position: fixed;
    top: 10px;
    left: 10px;
    background: #fff;
    border: 2px solid #333;
    padding: 8px 16px;
    cursor: pointer;
    font-weight: bold;
    border-radius: 6px;
    user-select: none;
    transition: background-color 0.3s ease;
    z-index: 1000;
  }
  #homeBtn:hover {
    background-color: #ddd;
  }
</style>
</head>
<body>

<button id="homeBtn">Home</button>
<canvas id="game" width="800" height="300"></canvas>

<script>
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  // Home button â†’ go back to index
  document.getElementById('homeBtn').addEventListener('click', () => {
    window.location.href = 'index.html';
  });

  // Constants
  const groundHeight = 50;
  const gravity = 0.8;
  const jumpForce = 15;

  // Player
  const player = {
    x: 50,
    y: 0,
    width: 40,
    height: 50,
    vy: 0,
    jumping: false,
    color: '#FF0000'
  };

  // Game state
  let obstacles = [];
  let speed = 5;
  let frameCount = 0;
  let score = 0;
  let gameOver = false;

  // Controls
  document.addEventListener('keydown', e => {
    if ((e.code === 'Space' || e.code === 'ArrowUp') && !player.jumping && !gameOver) {
      player.vy = -jumpForce;
      player.jumping = true;
    }
    if (e.code === 'Enter' && gameOver) resetGame();
  });

  function resetGame() {
    obstacles = [];
    player.y = canvas.height - groundHeight - player.height;
    player.vy = 0;
    player.jumping = false;
    frameCount = 0;
    score = 0;
    gameOver = false;
    speed = 5;
    loop();
  }

  // Drawing
  function drawGround() {
    ctx.fillStyle = '#654321';
    ctx.fillRect(0, canvas.height - groundHeight, canvas.width, groundHeight);
  }

  function drawPlayer() {
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.width, player.height);
  }

  function drawObstacles() {
    ctx.fillStyle = '#000';
    obstacles.forEach(obs => ctx.fillRect(obs.x, obs.y, obs.width, obs.height));
  }

  function drawScore() {
    ctx.fillStyle = '#000';
    ctx.font = '20px Arial';
    ctx.fillText('Score: ' + score, 10, 30);

    if (gameOver) {
      ctx.fillStyle = 'rgba(0,0,0,0.5)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = '#FFF';
      ctx.font = '40px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('Game Over', canvas.width / 2, canvas.height / 2 - 20);
      ctx.font = '20px Arial';
      ctx.fillText('Press Enter to restart', canvas.width / 2, canvas.height / 2 + 20);
      ctx.textAlign = 'start';
    }
  }

  // Updates
  function updatePlayer() {
    player.vy += gravity;
    player.y += player.vy;

    if (player.y + player.height > canvas.height - groundHeight) {
      player.y = canvas.height - groundHeight - player.height;
      player.vy = 0;
      player.jumping = false;
    }
  }

  function createObstacle() {
    const height = Math.floor(Math.random() * 30) + 20;
    obstacles.push({
      x: canvas.width,
      y: canvas.height - groundHeight - height,
      width: 20,
      height: height
    });
  }

  function updateObstacles() {
    for (let i = obstacles.length - 1; i >= 0; i--) {
      obstacles[i].x -= speed;

      if (obstacles[i].x + obstacles[i].width < 0) {
        obstacles.splice(i, 1);
        score++;

        // Faster speed scaling ðŸ”¥
        if (score % 5 === 0) {
          speed += 1; // ramp up quickly
        }
      }
    }
  }

  function checkCollision() {
    for (let obs of obstacles) {
      if (
        player.x < obs.x + obs.width &&
        player.x + player.width > obs.x &&
        player.y < obs.y + obs.height &&
        player.y + player.height > obs.y
      ) {
        gameOver = true;
        break;
      }
    }
  }

  // Main loop
  function loop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    drawGround();
    drawPlayer();
    drawObstacles();
    drawScore();

    if (!gameOver) {
      updatePlayer();
      updateObstacles();
      checkCollision();

      if (frameCount % 70 === 0) createObstacle(); // spawn a bit faster
      frameCount++;
      requestAnimationFrame(loop);
    }
  }

  // Start
  player.y = canvas.height - groundHeight - player.height;
  loop();
</script>

</body>
</html>
